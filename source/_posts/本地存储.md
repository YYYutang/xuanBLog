---
title: Javascript 本地存储
categories: Javascript
tags: [Javascript,前端]
cover: /picture/javascript.jpg
date: 2024-01-22 15:18
---



本地存储：将数据存储在本地浏览器中

常见的使用场景：

[https://todomvc.com/examples/vanilla-es6/](https://todomvc.com/examples/vanilla-es6/ "https://todomvc.com/examples/vanilla-es6/") 页面刷新数据不丢失

好处：

1、页面刷新或者关闭不丢失数据，实现数据持久化

2、容量较大，sessionStorage和 localStorage 约 5M 左右

## localStorage（重点）

**作用:** 数据可以长期保留在本地浏览器中，刷新页面和关闭页面，数据也不会丢失

**特性：**以键值对的形式存储，并且存储的是字符串， 省略了window

![](1676049635087_jeEWOzHDjx.png)



```javascript
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>本地存储-localstorage</title>
</head>

<body>
  <script>
    // 本地存储 - localstorage 存储的是字符串 
    // 1. 存储
    localStorage.setItem('age', 18)

    // 2. 获取
    console.log(typeof localStorage.getItem('age'))

    // 3. 删除
    localStorage.removeItem('age')
  </script>
</body>

</html>
```

## sessionStorage（了解）

特性：

-   用法跟localStorage基本相同
-   区别是：当页面浏览器被关闭时，存储在 sessionStorage 的数据会被清除

存储：sessionStorage.setItem(key,value)

获取：sessionStorage.getItem(key)

删除：sessionStorage.removeItem(key)

## localStorage 存储复杂数据类型

**问题：**本地只能存储字符串,无法存储复杂数据类型.

**解决：**需要将复杂数据类型转换成 JSON字符串,在存储到本地

**语法：**JSON.stringify(复杂数据类型)

JSON字符串：

-   首先是1个字符串
-   属性名使用双引号引起来，不能单引号
-   属性值如果是字符串型也必须双引号



```javascript
<body>
  <script>
    // 本地存储复杂数据类型
    const goods = {
      name: '小米',
      price: 1999
    }
    // localStorage.setItem('goods', goods)
    // console.log(localStorage.getItem('goods'))

    // 1. 把对象转换为JSON字符串  JSON.stringify
    localStorage.setItem('goods', JSON.stringify(goods))
    // console.log(typeof localStorage.getItem('goods'))

  </script>
</body>
```

**问题：**因为本地存储里面取出来的是字符串，不是对象，无法直接使用

**解决：** 把取出来的字符串转换为对象

**语法：**JSON.parse(JSON字符串)



```javascript
  <body>  
  <script>    // 本地存储复杂数据类型    
  const goods = {      name: '小米',      price: 1999    }    
  // localStorage.setItem('goods', goods)    
  // console.log(localStorage.getItem('goods'))    
  // 1. 把对象转换为JSON字符串  JSON.stringify    
  localStorage.setItem('goods', JSON.stringify(goods))    // console.log(typeof localStorage.getItem('goods'))    // 2. 把JSON字符串转换为对象  JSON.parse    
  console.log(JSON.parse(localStorage.getItem('goods')))  </script>
  </body>
```

